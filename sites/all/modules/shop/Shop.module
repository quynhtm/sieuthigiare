<?php
/*
* @Created by: HSS
* @Author	 : nguyenduypt86@gmail.com
* @Date 	 : 06/2014
* @Version	 : 1.0
*/
function Shop_menu() {
	//register shop
	$items["ajax-check-user-reg-exist"] = array(
		"title" => t('Đăng ký shop'),
		"description" => "Đăng ký shop",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopRegController/ajaxCheckShopRegExist'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["dang-ky.html"] = array(
		"title" => t('Đăng ký shop'),
		"description" => "Đăng ký shop",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopRegController/shopRegister'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["dang-nhap.html"] = array(
		"title" => t('Đăng nhập shop'),
		"description" => "Đăng nhâp shop",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopRegController/shopLogin'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["thoat.html"] = array(
		"title" => t('Thoát shop'),
		"description" => "Thoat shop",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopRegController/shopLogout'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["sua-thong-tin-gian-hang.html"] = array(
		"title" => t('Sửa thông tin gian hàng'),
		"description" => "Sửa thông tin gian hàng",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopRegController/shopEditInfo'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["doi-mat-khau.html"] = array(
		"title" => t('Đổi mật khẩu'),
		"description" => "Đổi mật khẩu",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopRegController/shopEditPassword'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	//admin shop
	$items["quan-ly-gian-hang.html"] = array(
		"title" => t('Quản lý sản phẩm'),
		"description" => "Quản lý sản phẩm",
		'page callback' => 'menuLoad',
		'page arguments' => array('AdminShopController/adminShop'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["dang-san-pham.html"] = array(
		"title" => t('Đăng sản phẩm'),
		"description" => "Đăng sản phẩm",
		'page callback' => 'menuLoad',
		'page arguments' => array('AdminShopController/adminFormShop'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["sua-san-pham/%/%"] = array(
		"title" => t('Sửa sản phẩm'),
		"description" => "Sửa sản phẩm",
		'page callback' => 'menuLoad',
		'page arguments' => array('AdminShopController/adminFormShop'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["xoa-san-pham"] = array(
		"title" => t('xóa sản phẩm'),
		"description" => "Xóa sản phẩm",
		'page callback' => 'menuLoad',
		'page arguments' => array('AdminShopController/adminDeleteShop'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	//index shop
	$items["gian-hang/%/%"] = array(
		"title" => t('Gian hàng'),
		"description" => "Gian hàng",
		'page callback' => 'menuLoad',
		'page arguments' => array('IndexShopController/indexShop'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["chi-tiet-san-pham.html"] = array(
		"title" => t('Chi tiết sản phẩm'),
		"description" => "Chi tiết sản phẩm",
		'page callback' => 'menuLoad',
		'page arguments' => array('IndexShopController/detailShop'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	//gio hang
	$items["gio-hang.html"] = array(
		"title" => t('Giỏ hàng'),
		"description" => "Giỏ hàng",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopCartController/shopCart'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);
	$items["gui-don-hang.html"] = array(
		"title" => t('Gửi đơn hàng'),
		"description" => "Gửi đơn hàng",
		'page callback' => 'menuLoad',
		'page arguments' => array('ShopCartController/shopSendCart'),
		'access callback' => TRUE,
		'type' => MENU_CALLBACK,
	);

  return $items;
}

function Shop_theme() {
	return array(
		//register shop
	    'shopRegister' => array(
	      'template' => 'View/tpl/shopRegister'
	    ),
	    'shopLogin' => array(
	      'template' => 'View/tpl/shopLogin'
	    ),
	    'shopEditInfo' => array(
	      'template' => 'View/tpl/shopEditInfo'
	    ),
	    'shopEditPassword' => array(
	      'template' => 'View/tpl/shopEditPassword'
	    ),
	    //admin shop
	    'adminShop' => array(
	      'template' => 'View/tpl/adminShop'
	    ),
	    'adminFormShop' => array(
	      'template' => 'View/tpl/adminFormShop'
	    ),
	    //index shop
	    'indexShop' => array(
	      'template' => 'View/tpl/indexShop'
	    ),
	    'detailShop' => array(
	      'template' => 'View/tpl/detailShop'
	    ),

	    'shopCart' => array(
	      'template' => 'View/tpl/shopCart'
	    ),
	    'shopSendCart' => array(
	      'template' => 'View/tpl/shopSendCart'
	    ),  
	);
}

function Shop_init() {
	$uri = request_uri();
	if(preg_match("/(\/admin)/", $uri)==0){
		$files = array(
			'Model/ShopRegModel.php',
			'Controller/ShopRegController.php',
			
			'Model/AdminShopModel.php',
			'Controller/AdminShopController.php',
			
			'Model/IndexShopModel.php',
			'Controller/IndexShopController.php',
			
			'Controller/ShopCartController.php',
			
			'View/css/shop.css',
			'View/js/shop.js',
		);
		Loader::load('Shop', $files);
	}
}
